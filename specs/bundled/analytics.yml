openapi: 3.0.2
info:
  title: Analytics API
  description: >
    The Analytics API lets you review your search, and click and conversion
    analytics.

    > **Note**: The API key in the `X-Algolia-API-Key` header requires the
    [`analytics`
    ACL](https://www.algolia.com/doc/guides/security/api-keys/#access-control-list-acl).
  version: 1.0.0
components:
  securitySchemes:
    appId:
      type: apiKey
      in: header
      name: X-Algolia-Application-Id
    apiKey:
      type: apiKey
      in: header
      name: X-Algolia-API-Key
  parameters:
    PathInPath:
      name: path
      in: path
      description: Path of the endpoint, anything after "/1" must be specified.
      required: true
      schema:
        type: string
        example: /keys
    Parameters:
      name: parameters
      in: query
      description: Query parameters to apply to the current query.
      schema:
        type: object
        additionalProperties: true
    Index:
      in: query
      name: index
      description: Index name to target.
      required: true
      schema:
        type: string
        example: YourIndexName
    ClickAnalytics:
      in: query
      name: clickAnalytics
      description: >-
        Whether to include [click and
        conversion](https://www.algolia.com/doc/guides/sending-events/getting-started/)
        rates for a search.
      schema:
        type: boolean
        default: false
    StartDate:
      in: query
      name: startDate
      description: >-
        Start date (a string in the format `YYYY-MM-DD`) of the period to
        analyze.
      schema:
        type: string
        example: '2022-09-19'
        pattern: ^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$
    EndDate:
      in: query
      name: endDate
      description: End date (a string in the format `YYYY-MM-DD`) of the period to analyze.
      schema:
        type: string
        example: '2023-01-21'
        pattern: ^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$
    OrderBy:
      in: query
      name: orderBy
      description: Reorder the results.
      schema:
        $ref: '#/components/schemas/orderBy'
    Direction:
      in: query
      name: direction
      description: |
        Sorting direction of the results: ascending or descending.
      schema:
        $ref: '#/components/schemas/direction'
    Limit:
      in: query
      name: limit
      description: Number of records to return (page size).
      schema:
        type: integer
        default: 10
    Offset:
      in: query
      name: offset
      description: Position of the starting record. Used for paging. 0 is the first record.
      schema:
        type: integer
        default: 0
    Tags:
      name: tags
      in: query
      description: >-
        Filter analytics on the
        [`analyticsTags`](https://www.algolia.com/doc/api-reference/api-parameters/analyticsTags/)
        set at search time. Multiple tags can be combined with the operators OR
        and AND. If a tag contains characters like spaces or parentheses, it
        must be URL-encoded.
      example: device:mobile%20phone
      schema:
        type: string
    Search:
      in: query
      name: search
      description: User query.
      example: enable ab test
      schema:
        type: string
    Attribute:
      in: path
      name: attribute
      description: Attribute name.
      required: true
      schema:
        type: string
        example: brand
  schemas:
    ErrorBase:
      description: Error.
      type: object
      additionalProperties: true
      properties:
        message:
          type: string
          example: Invalid Application-Id or API-Key
    orderBy:
      type: string
      description: >
        Method for ordering results.

        `clickThroughRate`, `conversionRate` and `averageClickPosition` are only
        available if the `clickAnalytics` parameter is `true`.
      enum:
        - searchCount
        - clickThroughRate
        - conversionRate
        - averageClickPosition
      default: searchCount
    direction:
      type: string
      enum:
        - asc
        - desc
      default: asc
    search:
      description: User query.
      example: separator
      type: string
    count:
      description: >-
        Number of tracked _and_ untracked searches (where the `clickAnalytics`
        parameter isn't `true`).
      type: integer
      example: 504
    nbHits:
      type: integer
      description: Number of hits the search query matched.
      example: 20
    topSearchesResponse:
      type: object
      additionalProperties: false
      required:
        - searches
      properties:
        searches:
          type: array
          description: Top searches with their hits count.
          items:
            type: object
            title: topSearch
            additionalProperties: false
            required:
              - search
              - count
              - nbHits
            properties:
              search:
                $ref: '#/components/schemas/search'
              count:
                $ref: '#/components/schemas/count'
              nbHits:
                $ref: '#/components/schemas/nbHits'
    rate:
      type: number
      format: double
      description: >
        [Click-through rate
        (CTR)](https://www.algolia.com/doc/guides/search-analytics/concepts/metrics/#click-through-rate).
      minimum: 0
      maximum: 1
      example: 0.14634193523426317
    averageClickPosition:
      type: integer
      description: >-
        Average
        [position](https://www.algolia.com/doc/guides/search-analytics/concepts/metrics/#click-position)
        of clicked search result.
      example: 1
    conversionRate:
      type: number
      format: double
      description: >
        [Conversion rate
        (CR)](https://www.algolia.com/doc/guides/search-analytics/concepts/metrics/#conversion-rate).
      example: 0
    trackedSearchCount:
      type: integer
      example: 2
      description: >-
        Number of tracked searches. This is the number of search requests where
        the `clickAnalytics` parameter is `true`.
    clickCount:
      type: integer
      description: Number of click events.
      example: 162
    conversionCount:
      type: integer
      description: Number of converted clicks.
      example: 0
    topSearchesResponseWithAnalytics:
      type: object
      additionalProperties: false
      required:
        - searches
      properties:
        searches:
          type: array
          description: Top searches with their hits count and analytics.
          items:
            type: object
            title: topSearchWithAnalytics
            additionalProperties: false
            required:
              - search
              - count
              - nbHits
              - clickThroughRate
              - averageClickPosition
              - conversionRate
              - trackedSearchCount
              - clickCount
              - conversionCount
            properties:
              search:
                $ref: '#/components/schemas/search'
              count:
                $ref: '#/components/schemas/count'
              clickThroughRate:
                $ref: '#/components/schemas/rate'
              averageClickPosition:
                $ref: '#/components/schemas/averageClickPosition'
              conversionRate:
                $ref: '#/components/schemas/conversionRate'
              trackedSearchCount:
                $ref: '#/components/schemas/trackedSearchCount'
              clickCount:
                $ref: '#/components/schemas/clickCount'
              conversionCount:
                $ref: '#/components/schemas/conversionCount'
              nbHits:
                $ref: '#/components/schemas/nbHits'
    getTopSearchesResponse:
      oneOf:
        - $ref: '#/components/schemas/topSearchesResponse'
        - $ref: '#/components/schemas/topSearchesResponseWithAnalytics'
    parameters_count:
      description: Number of occurrences.
      example: 2
      type: integer
    date:
      type: string
      description: Date of the event in the format YYYY-MM-DD.
      example: '2023-06-14'
    noResultCount:
      description: Number of occurences.
      type: integer
      example: 54
    hit:
      description: Hit.
      type: string
      example: method-export-rules-php
    topHitsResponse:
      type: object
      additionalProperties: false
      required:
        - hits
      properties:
        hits:
          type: array
          description: Top hits.
          items:
            type: object
            title: topHit
            additionalProperties: false
            required:
              - hit
              - count
            properties:
              hit:
                $ref: '#/components/schemas/hit'
              count:
                $ref: '#/components/schemas/parameters_count'
    topHitsResponseWithAnalytics:
      type: object
      additionalProperties: false
      required:
        - hits
      properties:
        hits:
          type: array
          description: Top hits.
          items:
            type: object
            title: topHitWithAnalytics
            additionalProperties: false
            required:
              - hit
              - count
              - clickThroughRate
              - conversionRate
              - trackedSearchCount
              - clickCount
              - conversionCount
            properties:
              hit:
                $ref: '#/components/schemas/hit'
              count:
                $ref: '#/components/schemas/parameters_count'
              clickThroughRate:
                $ref: '#/components/schemas/rate'
              conversionRate:
                $ref: '#/components/schemas/conversionRate'
              trackedSearchCount:
                $ref: '#/components/schemas/trackedSearchCount'
              clickCount:
                $ref: '#/components/schemas/clickCount'
              conversionCount:
                $ref: '#/components/schemas/conversionCount'
    getTopHitsResponse:
      oneOf:
        - $ref: '#/components/schemas/topHitsResponse'
        - $ref: '#/components/schemas/topHitsResponseWithAnalytics'
    attribute:
      description: Attribute name.
      type: string
      example: url
    getTopFilterAttribute:
      type: object
      additionalProperties: false
      required:
        - attribute
        - count
      properties:
        attribute:
          $ref: '#/components/schemas/attribute'
        count:
          $ref: '#/components/schemas/parameters_count'
    getTopFilterAttributesResponse:
      type: object
      additionalProperties: false
      required:
        - attributes
      properties:
        attributes:
          type: array
          description: Filterable attributes.
          items:
            $ref: '#/components/schemas/getTopFilterAttribute'
    operator:
      description: Operator.
      type: string
      example: ':'
    value:
      description: Attribute value.
      type: string
      example: integration
    getTopFilterForAttribute:
      type: object
      additionalProperties: false
      required:
        - operator
        - attribute
        - value
        - count
      properties:
        attribute:
          $ref: '#/components/schemas/attribute'
        operator:
          $ref: '#/components/schemas/operator'
        value:
          $ref: '#/components/schemas/value'
        count:
          $ref: '#/components/schemas/parameters_count'
    getTopFilterForAttributeResponse:
      type: object
      additionalProperties: false
      required:
        - values
      properties:
        values:
          type: array
          description: Filter values for an attribute.
          items:
            $ref: '#/components/schemas/getTopFilterForAttribute'
    getTopFiltersNoResultsValue:
      type: object
      additionalProperties: false
      required:
        - attribute
        - operator
        - value
      properties:
        attribute:
          $ref: '#/components/schemas/attribute'
        operator:
          $ref: '#/components/schemas/operator'
        value:
          $ref: '#/components/schemas/value'
    getTopFiltersNoResultsValues:
      type: object
      additionalProperties: false
      required:
        - values
        - count
      properties:
        count:
          $ref: '#/components/schemas/parameters_count'
        values:
          type: array
          description: Filters with no results.
          items:
            $ref: '#/components/schemas/getTopFiltersNoResultsValue'
    getTopFiltersNoResultsResponse:
      type: object
      additionalProperties: false
      required:
        - values
      properties:
        values:
          type: array
          description: Filters with no results.
          items:
            $ref: '#/components/schemas/getTopFiltersNoResultsValues'
    average:
      type: number
      format: double
      description: Average count of all click events.
      example: 2.3344634550185286
    updatedAt:
      type: string
      example: '2023-07-04T12:49:15Z'
      description: >-
        Timestamp of the last update in [ISO
        8601](https://wikipedia.org/wiki/ISO_8601) format.
  responses:
    BadRequest:
      description: Bad request or request arguments.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'
    FeatureNotEnabled:
      description: This feature is not enabled on your Algolia account.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'
    MethodNotAllowed:
      description: Method not allowed with this API key.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'
    IndexNotFound:
      description: Index not found.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorBase'
servers:
  - url: https://analytics.{region}.algolia.com
    variables:
      region:
        enum:
          - us
          - de
        default: us
  - url: https://analytics.algolia.com
security:
  - appId: []
    apiKey: []
tags:
  - name: advanced
    x-displayName: Advanced
    description: Advanced operations.
  - name: click
    x-displayName: Click Analytics
    description: Get all click analytics.
  - name: search
    x-displayName: Search Analytics
    description: Get all search analytics.
x-tagGroups:
  - name: General
    tags:
      - search
      - click
  - name: Others
    tags:
      - advanced
paths:
  /1{path}:
    get:
      operationId: get
      summary: Send requests to the Algolia REST API.
      description: This method allow you to send requests to the Algolia REST API.
      parameters:
        - $ref: '#/components/parameters/PathInPath'
        - $ref: '#/components/parameters/Parameters'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
      tags:
        - analytics
    post:
      operationId: post
      requestBody:
        description: Parameters to send with the custom request.
        content:
          application/json:
            schema:
              type: object
      summary: Send requests to the Algolia REST API.
      description: This method allow you to send requests to the Algolia REST API.
      parameters:
        - $ref: '#/components/parameters/PathInPath'
        - $ref: '#/components/parameters/Parameters'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
      tags:
        - analytics
    put:
      operationId: put
      requestBody:
        description: Parameters to send with the custom request.
        content:
          application/json:
            schema:
              type: object
      summary: Send requests to the Algolia REST API.
      description: This method allow you to send requests to the Algolia REST API.
      parameters:
        - $ref: '#/components/parameters/PathInPath'
        - $ref: '#/components/parameters/Parameters'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
      tags:
        - analytics
    delete:
      operationId: del
      summary: Send requests to the Algolia REST API.
      description: This method allow you to send requests to the Algolia REST API.
      parameters:
        - $ref: '#/components/parameters/PathInPath'
        - $ref: '#/components/parameters/Parameters'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
      tags:
        - analytics
  /2/searches:
    get:
      tags:
        - analytics
      operationId: getTopSearches
      summary: Get top searches.
      description: >-
        Returns the most popular of the latest 1,000 searches. For each search,
        also returns the number of hits.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/ClickAnalytics'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/OrderBy'
        - $ref: '#/components/parameters/Direction'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getTopSearchesResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/searches/count:
    get:
      tags:
        - analytics
      operationId: getSearchesCount
      summary: Get number of searches.
      description: Returns the number of searches within a time range.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getSearchesCountResponse
                type: object
                additionalProperties: false
                required:
                  - dates
                  - count
                properties:
                  count:
                    $ref: '#/components/schemas/parameters_count'
                  dates:
                    type: array
                    description: Search events with their associated dates and hit counts.
                    items:
                      type: object
                      title: searchEvent
                      additionalProperties: false
                      required:
                        - date
                        - count
                      properties:
                        date:
                          $ref: '#/components/schemas/date'
                        count:
                          $ref: '#/components/schemas/parameters_count'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/searches/noResults:
    get:
      tags:
        - analytics
      operationId: getSearchesNoResults
      summary: Get top searches with no results.
      description: >-
        Returns the most popular of the latest 1,000 searches that didn't return
        any results.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getSearchesNoResultsResponse
                type: object
                additionalProperties: false
                required:
                  - searches
                properties:
                  searches:
                    type: array
                    description: Searches with no results.
                    items:
                      type: object
                      title: searchNoResultEvent
                      additionalProperties: false
                      required:
                        - search
                        - count
                        - nbHits
                      properties:
                        search:
                          $ref: '#/components/schemas/search'
                        count:
                          $ref: '#/components/schemas/parameters_count'
                        nbHits:
                          $ref: '#/components/schemas/nbHits'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/searches/noClicks:
    get:
      tags:
        - analytics
      operationId: getSearchesNoClicks
      summary: Get top searches with no clicks.
      description: >-
        Return the most popular of the last 1,000 searches that didn't lead to
        any clicks.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getSearchesNoClicksResponse
                type: object
                additionalProperties: false
                required:
                  - searches
                properties:
                  searches:
                    type: array
                    description: Searches with no clicks.
                    items:
                      type: object
                      title: searchNoClickEvent
                      additionalProperties: false
                      required:
                        - search
                        - count
                        - withFilterCount
                      properties:
                        search:
                          $ref: '#/components/schemas/search'
                        count:
                          $ref: '#/components/schemas/parameters_count'
                        withFilterCount:
                          $ref: '#/components/schemas/parameters_count'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/searches/noResultRate:
    get:
      tags:
        - analytics
      operationId: getNoResultsRate
      summary: Get no results rate.
      description: Returns the rate at which searches didn't return any results.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getNoResultsRateResponse
                type: object
                additionalProperties: false
                required:
                  - rate
                  - count
                  - noResultCount
                  - dates
                properties:
                  rate:
                    $ref: '#/components/schemas/rate'
                  count:
                    $ref: '#/components/schemas/parameters_count'
                  noResultCount:
                    $ref: '#/components/schemas/parameters_count'
                  dates:
                    type: array
                    description: >-
                      Overall count of searches without results plus a daily
                      breakdown.
                    items:
                      type: object
                      title: noResultsRateEvent
                      additionalProperties: false
                      required:
                        - date
                        - noResultCount
                        - count
                        - rate
                      properties:
                        date:
                          $ref: '#/components/schemas/date'
                        noResultCount:
                          $ref: '#/components/schemas/noResultCount'
                        count:
                          $ref: '#/components/schemas/count'
                        rate:
                          $ref: '#/components/schemas/rate'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/searches/noClickRate:
    get:
      tags:
        - analytics
      operationId: getNoClickRate
      summary: Get no click rate.
      description: >-
        Returns the rate at which searches don't lead to any clicks. The
        endpoint returns a value for the complete given time range, as well as a
        value per day. It also returns the count of searches and searches
        without clicks.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getNoClickRateResponse
                type: object
                additionalProperties: false
                required:
                  - dates
                  - count
                  - noClickCount
                  - rate
                properties:
                  rate:
                    $ref: '#/components/schemas/rate'
                  count:
                    $ref: '#/components/schemas/clickCount'
                  noClickCount:
                    $ref: '#/components/schemas/clickCount'
                  dates:
                    type: array
                    description: >-
                      Overall count of searches without clicks plus a daily
                      breakdown.
                    items:
                      type: object
                      title: noClickRateEvent
                      additionalProperties: false
                      required:
                        - rate
                        - count
                        - noClickCount
                        - date
                      properties:
                        rate:
                          $ref: '#/components/schemas/rate'
                        count:
                          $ref: '#/components/schemas/count'
                        noClickCount:
                          $ref: '#/components/schemas/clickCount'
                        date:
                          $ref: '#/components/schemas/date'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/hits:
    get:
      tags:
        - analytics
      operationId: getTopHits
      summary: Get top hits.
      description: Return the most popular clicked results in the last 1,000 searches.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/Search'
        - $ref: '#/components/parameters/ClickAnalytics'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getTopHitsResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/users/count:
    get:
      tags:
        - analytics
      operationId: getUsersCount
      summary: Get user count.
      description: Return the count of unique users.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getUsersCountResponse
                type: object
                additionalProperties: false
                required:
                  - dates
                  - count
                properties:
                  count:
                    $ref: '#/components/schemas/parameters_count'
                  dates:
                    type: array
                    description: User count.
                    items:
                      type: object
                      title: userWithDate
                      additionalProperties: false
                      required:
                        - date
                        - count
                      properties:
                        date:
                          $ref: '#/components/schemas/date'
                        count:
                          $ref: '#/components/schemas/parameters_count'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/filters:
    get:
      tags:
        - analytics
      operationId: getTopFilterAttributes
      summary: Get top filterable attributes.
      description: >-
        Return the most popular [filterable
        attributes](https://www.algolia.com/doc/guides/managing-results/refine-results/filtering/)
        in the 1,000 most recently used filters.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/Search'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getTopFilterAttributesResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/filters/{attribute}:
    get:
      tags:
        - analytics
      operationId: getTopFilterForAttribute
      summary: Get top filter values for an attribute.
      description: >-
        Returns the most popular filter values for an attribute in the 1,000
        most recently used filters.
      parameters:
        - $ref: '#/components/parameters/Attribute'
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/Search'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getTopFilterForAttributeResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/filters/noResults:
    get:
      tags:
        - analytics
      operationId: getTopFiltersNoResults
      summary: Get top filters for a no result search.
      description: >-
        Returns top filters for filter-enabled searches that don't return
        results. Limited to the 1,000 most recently used filters.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/Search'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getTopFiltersNoResultsResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/countries:
    get:
      tags:
        - analytics
      operationId: getTopCountries
      summary: Get top countries.
      description: Returns top countries. Limited to the 1,000 most frequent ones.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getTopCountriesResponse
                type: object
                additionalProperties: false
                required:
                  - countries
                properties:
                  countries:
                    type: array
                    description: Countries
                    items:
                      type: object
                      title: topCountry
                      additionalProperties: false
                      required:
                        - country
                        - count
                      properties:
                        country:
                          description: Country.
                          type: string
                          example: UK
                        count:
                          $ref: '#/components/schemas/parameters_count'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/clicks/averageClickPosition:
    get:
      tags:
        - analytics
      operationId: getAverageClickPosition
      summary: Get average click position.
      description: >
        Return the average click position for the complete time range and for
        individual days.

        > **Note**: If all `positions` have a `clickCount` of `0` or `null`, it
        means Algolia didn't receive any click events for tracked searches. A
        _tracked_ search is a search request where the `clickAnalytics`
        parameter is `true`.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getAverageClickPositionResponse
                type: object
                additionalProperties: false
                required:
                  - average
                  - clickCount
                  - dates
                properties:
                  average:
                    $ref: '#/components/schemas/average'
                  clickCount:
                    $ref: '#/components/schemas/clickCount'
                  dates:
                    type: array
                    description: Average click positions.
                    items:
                      type: object
                      title: averageClickEvent
                      additionalProperties: false
                      required:
                        - average
                        - clickCount
                        - date
                      properties:
                        average:
                          $ref: '#/components/schemas/average'
                        clickCount:
                          $ref: '#/components/schemas/clickCount'
                        date:
                          $ref: '#/components/schemas/date'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/clicks/positions:
    get:
      tags:
        - analytics
      operationId: getClickPositions
      summary: Get click positions.
      description: >
        Show the number of clicks events and their associated position in the
        search results.


        > **Note**: If all `positions` have a `clickCount` of `0` or `null`, it
        means Algolia didn't receive any click events for tracked searches. A
        _tracked_ search is a search request where the `clickAnalytics`
        parameter is `true`.
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getClickPositionsResponse
                type: object
                additionalProperties: false
                required:
                  - positions
                properties:
                  positions:
                    type: array
                    description: Click positions.
                    minItems: 2
                    maxItems: 2
                    items:
                      type: object
                      title: clickPosition
                      additionalProperties: false
                      required:
                        - position
                        - clickCount
                      properties:
                        position:
                          description: >
                            Range of positions with the following pattern:

                            - For positions 1 to 10, the number of click events
                            are shown for each position - For positions 11 to
                            20, all click events are grouped - For positions 21
                            and up, all click events are grouped.
                          type: array
                          example:
                            - 10
                            - 10
                          items:
                            type: integer
                        clickCount:
                          $ref: '#/components/schemas/clickCount'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/clicks/clickThroughRate:
    get:
      tags:
        - analytics
      operationId: getClickThroughRate
      summary: Get click-through rate (CTR).
      description: >-
        Returns a [click-through rate
        (CTR)](https://www.algolia.com/doc/guides/search-analytics/concepts/metrics/#click-through-rate).
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getClickThroughRateResponse
                type: object
                additionalProperties: false
                required:
                  - dates
                  - clickCount
                  - trackedSearchCount
                  - rate
                properties:
                  rate:
                    $ref: '#/components/schemas/rate'
                  clickCount:
                    $ref: '#/components/schemas/clickCount'
                  trackedSearchCount:
                    $ref: '#/components/schemas/trackedSearchCount'
                  dates:
                    type: array
                    description: Click-through rate events.
                    items:
                      type: object
                      title: clickThroughRateEvent
                      additionalProperties: false
                      required:
                        - rate
                        - clickCount
                        - trackedSearchCount
                        - date
                      properties:
                        rate:
                          $ref: '#/components/schemas/rate'
                        clickCount:
                          $ref: '#/components/schemas/clickCount'
                        trackedSearchCount:
                          $ref: '#/components/schemas/trackedSearchCount'
                        date:
                          $ref: '#/components/schemas/date'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/conversions/conversionRate:
    get:
      tags:
        - analytics
      operationId: getConversationRate
      summary: Get conversion rate (CR).
      description: >-
        Return a [conversion
        rate](https://www.algolia.com/doc/guides/search-analytics/concepts/metrics/#conversion-rate).
      parameters:
        - $ref: '#/components/parameters/Index'
        - $ref: '#/components/parameters/StartDate'
        - $ref: '#/components/parameters/EndDate'
        - $ref: '#/components/parameters/Tags'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getConversationRateResponse
                type: object
                additionalProperties: false
                required:
                  - dates
                  - trackedSearchCount
                  - conversionCount
                  - rate
                properties:
                  rate:
                    $ref: '#/components/schemas/rate'
                  trackedSearchCount:
                    $ref: '#/components/schemas/trackedSearchCount'
                  conversionCount:
                    $ref: '#/components/schemas/conversionCount'
                  dates:
                    type: array
                    description: Conversion events.
                    items:
                      type: object
                      title: conversionRateEvent
                      additionalProperties: false
                      required:
                        - rate
                        - trackedSearchCount
                        - conversionCount
                        - date
                      properties:
                        rate:
                          $ref: '#/components/schemas/rate'
                        trackedSearchCount:
                          $ref: '#/components/schemas/trackedSearchCount'
                        conversionCount:
                          $ref: '#/components/schemas/conversionCount'
                        date:
                          $ref: '#/components/schemas/date'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
  /2/status:
    get:
      tags:
        - analytics
      operationId: getStatus
      summary: Get Analytics API status.
      description: >
        Return the latest update time of the Analytics API for an index. If the
        index has been recently created or no search has been performed yet,
        `updatedAt` will be `null`.

        > **Note**: The Analytics API is updated every 5&nbsp;minutes.
      parameters:
        - $ref: '#/components/parameters/Index'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: getStatusResponse
                type: object
                additionalProperties: false
                required:
                  - updatedAt
                properties:
                  updatedAt:
                    $ref: '#/components/schemas/updatedAt'
        '400':
          $ref: '#/components/responses/BadRequest'
        '402':
          $ref: '#/components/responses/FeatureNotEnabled'
        '403':
          $ref: '#/components/responses/MethodNotAllowed'
        '404':
          $ref: '#/components/responses/IndexNotFound'
